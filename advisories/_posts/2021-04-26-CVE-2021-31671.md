---
layout: advisory
title: 'CVE-2021-31671 (pgsync): Connection security vulnerability with schema sync'
comments: false
categories:
- pgsync
advisory:
  gem: pgsync
  cve: 2021-31671
  ghsa: 72rj-36qc-47g7
  url: https://github.com/ankane/pgsync/issues/121
  title: Connection security vulnerability with schema sync
  date: 2021-04-26
  description: |
    pgsync drops connection parameters when syncing the schema with the
    --schema-first and --schema-only options. Some of these parameters may
    affect security. For instance, if sslmode is dropped, the connection
    may not use SSL. The first connection parameter is not affected.

    pgsync drops connection parameters when syncing the schema with the
    `--schema-first` and `--schema-only` options. Some of these parameters
    may affect security. For instance, if `sslmode` is dropped, the
    connection may not use SSL. The first connection parameter is not affected.

    An example where `sslmode` is dropped (`connect_timeout` is not affected):

    ```yaml
    from: postgres://user:pass@host/dbname?connect_timeout=10&sslmode=require
    ```

    This applies to both the `to` and `from` connections.
  cvss_v3: 7.5
  patched_versions:
  - ">= 0.6.7"
---
